<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AGREGAR PRODUCTO</title>
    <script src="{%static 'js/FormularioProducto.js' %}"></script>
    <script src="{%static "js/crudVolver.js" %}"></script>
    <link rel="stylesheet" href="{%static 'css/form-style.css'%}">
</head>
<body>
    <div class="form-container">
    <h1>Formulario de registro de Productos</h1>
        <label>Categoria Producto: </label>
        <select
        name="datosCatProd"
        id="datosCatProd">
        </select>
        <script>
            let categoriaProductos = JSON.parse(localStorage.getItem("categorias"))
            let datos = document.getElementById("datosCatProd")
            datos.innerHTML = `<option value="">Elige la categoria del producto</option>`
            categoriaProductos.forEach(categoria => {
                let productocategoria = `<option value="${categoria.nombreCategoria}">${categoria.nombreCategoria}</option>`
                datos.innerHTML += productocategoria;
            }); 
        </script>
        <span id="eDatosCatProdE"></span>
        <br></br>
        <br></br>
        <label>Codigo de Barras: </label>
        <input
        name="codigoBarras"
        id="codigoBarras"
        type="text"
        placeholder="Ingrese el codigo de barras del Producto">
        </input>
        <span id="eCodigoBarrasE"></span>
        <br></br>
        <br></br>
        <label>Valor Producto: </label>
        <input
        name="valorProducto"
        id="valorProducto"
        type="number"
        placeholder="Ingrese el valor del Producto">
        </input>
        <span id="eValorProductoE"></span>
        <br></br>
        <br></br>
        <label>Stock Producto: </label>
        <input
        name="stockProducto"
        id="stockProducto"
        type="number"
        placeholder="Ingrese el stock del Producto">
        </input>
        <span id="eStockProductoE"></span>
        <br></br>
        <br></br>
        <label>Nombre Producto: </label>
        <input
        name="nombreProducto"
        id="nombreProducto"
        type="text"
        placeholder="Ingrese el nombre del Producto">
        </input>
        <span id="eNombreProductoE"></span>
        <br></br>
        <br></br>
        <label>Marca Producto: </label>
        <input
        name="marcaProducto"
        id="marcaProducto"
        type="text"
        placeholder="Ingrese el marca del Producto">
        </input>
        <span id="eMarcaProductoE"></span>
        <br></br>
        <br></br>
        <label>Fecha Vencimiento: </label>
        <input
        name="fechaVencimientoProducto"
        id="fechaVencimientoProducto"
        type="date"
        ></input>
        <span id="eFechaVencimientoProductoE"></span>
        <br></br>
        <br></br>
        

        <button
            className="BotonesEncabezado" onclick="validar()">Registrar Producto
        </button>


        <script>
            /* Función para validar el registro de productos */
            function validar() {
                // Llama a la función registrarProductos() que intenta registrar un producto
                // Devuelve true si todos los campos son válidos, o false si falta algún dato
                const validador = registrarProductos();

                // Si registrarProductos devuelve false, significa que faltan datos
                if (validador == false) {
                    alert("Faltan datos."); // Muestra alerta al usuario
                    return; // Sale de la función sin continuar
                }
                // Si registrarProductos devuelve true, todo está correcto
                else if(validador == true){
                    // Redirige al listado de productos
                    // NOTA: No es correcto usar window.onload aquí
                    // porque se ejecuta inmediatamente y sobrescribe window.onload
                    window.onload = regresarCrudProducto();
                }
            }
        </script>



        <br></br>
        <span id="errorRegistrar"></span>

        <button type="button" onclick="regresarCrudProducto()">VOLVER ATRAS</button>
        </div>
</body>
</html>